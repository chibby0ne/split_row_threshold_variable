<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Creonic Simulation Environment (CSE): How to write and organize an XML configuration file</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>How to write and organize an XML configuration file </h1>  </div>
</div>
<div class="contents">
<p>This page shows how to setup an own XML configuration file for simulation chains. Furthermore, it shows how to configure modules using the XML configuration file.</p>
<h2><a class="anchor" id="module_tag"></a>
The &lt;module&gt; tag</h2>
<p>Here is an excerpt of a typical XML configuration <a href="file:">file:</a></p>
<div class="fragment"><pre class="fragment">&lt;cse_chain&gt;

    &lt;!-- Set Mapper to 16-APSK modulation --&gt;
    &lt;module&gt;
        &lt;instance_name&gt;Mapper&lt;/instance_name&gt;
        &lt;mapping&gt;MAP_16_APSK&lt;/mapping&gt;
    &lt;/module&gt;

    &lt;module&gt;
    ...
    &lt;/module&gt;

    ...
&lt;/cse_chain&gt;
</pre></div><p>The XML-file has to contain a main tag &lt;cse_chain&gt; that contains all other tags. Each module is identified with the &lt;instance_name&gt; tag. This tag corresponds to the instance_name parameter that is contained in each module, when it is derived from the Base_Parameter class. By default, the instance name corresponds to the class name of the module. Additional tags are dependant on the Parameter class of the module. The module defines such tags by registering the parameter with the <a class="el" href="classcse__lib_1_1Param.html#a2d192190afd8ef831e8319ef0cff4d26" title="Initialize the parameter class to use in a module.">cse_lib::Param::Init</a>-function within the param_list_ with their corresponding strings, see <a class="el" href="howto_write_module_page.html">How to write a new functional module</a>. The module is able to read the data types bool, int, float, double, long long int, and string. For int values it is possible to use prefixes like "0x" or 0o".</p>
<p>The xml sub tree to configure a module can be printed to stdout with the static function <a class="el" href="classParse__Module__Config.html#a616677a16262f18b8fb346eaaea7d83a" title="Print the configuration XML tree of the given module as template for the configuration file...">Parse_Module_Config::Print_Module_Config_XML_Tree()</a>. This feature will save a lot of code typing work.</p>
<h2><a class="anchor" id="global_tag"></a>
The &lt;global&gt; tag</h2>
<p>In addition to the &lt;module&gt; tag, there exists an optional &lt;global&gt; tag. The purpose of this tag is to spread values to a multiple number of modules, without the need to set this value at multiple places of the XML <a href="file:">file:</a></p>
<div class="fragment"><pre class="fragment">&lt;cse_chain&gt;

    &lt;global&gt;
        &lt;variable name=<span class="stringliteral">&quot;mapping&quot;</span>&gt;MAP_QPSK&lt;/variable&gt;
    &lt;/global&gt;

    &lt;!-- Set Mapper Parameters --&gt;
    &lt;module&gt;
        &lt;instance_name&gt;Mapper&lt;/instance_name&gt;
        &lt;mapping&gt;&lt;global_variable name=<span class="stringliteral">&quot;mapping&quot;</span>/&gt;&lt;/mapping&gt;
    &lt;/module&gt;

    &lt;!-- Set Demapper Parameters --&gt;
    &lt;module&gt;
        &lt;instance_name&gt;Demapper&lt;/instance_name&gt;
        &lt;mapping&gt;&lt;global_variable name=<span class="stringliteral">&quot;mapping&quot;</span>/&gt;&lt;/mapping&gt;
    &lt;/module&gt;

    ...
&lt;/cse_chain&gt;
</pre></div><p>The parameter "mapping" is defined at just a single place and the creonic simulation environment makes sure that both modules will have the same configuration by inserting the value of the global variable into the corresponding tags.</p>
<h3><a class="anchor" id="iter_tag"></a>
The &lt;iter&gt; tag</h3>
<p>Up to now we have created a static configuration. It is not possible to iterate over a variable, e.g., the signal-to-noise ratio (SNR). Therefore, the &lt;iter&gt; tag is introduced in the global section. The variables defined there are iterative variables and can be used just like normal global variables.</p>
<div class="fragment"><pre class="fragment">...
    &lt;global&gt;
        &lt;iter&gt;
              &lt;variable name=<span class="stringliteral">&quot;eb_n0&quot;</span>&gt;10; 12; 13&lt;/variable&gt;
              &lt;variable name=<span class="stringliteral">&quot;quant&quot;</span>&gt;10.0:0.1:11.0&lt;/variable&gt;
        &lt;/iter&gt;
    &lt;/global&gt;
...
</pre></div><p>Several possibilities exist in order to define the iteration interval:</p>
<ul>
<li>Semicolon separated list; the variable eb_n0 is defined like that. </li>
<li>"start:incr:end" format; all values including the start and the end values are taken for the configuration. The incr value gives the increment. If the increment is missed ("start:end") an increment value of one is assumed.</li>
</ul>
<p>You can mix possibility one with the other ones, e.g., "10; 11; 31:0.5:32" results in the sequence 10, 11, 31, 31.5,32. The variables defined in &lt;iter&gt; section become normal global variables and can be used in the module sections. The class <a class="el" href="classManage__Module__Config.html" title="Manage the automatic configuration of the modules via a XML file.">Manage_Module_Config</a> creates for each value a static configuration, which can be passed to the modules.</p>
<p>In case multiple iteration variables exist, the order of the iteration variable definition is important. The first value is taken as the inner iteration variable. In the example above, the configuration will iterate over eb_n0 (10,12,13) with the fixed values quant = 10 and offset = 28. After that it will iterate over eb_no with the fixed values quant = 11 and offset = 28.</p>
<h3><a class="anchor" id="data_sets"></a>
The &lt;data_set&gt; tag</h3>
<p>In some cases you might want to iterate over a variable, but the values of another variable depend on the current value of the iteration variable. For instance if you create a simulation with different code rates, you want to iterate over different SNR regions for each code rate.</p>
<p>The &lt;data_set&gt; tag allows for such a behavior of the simulation. In this tag you can define a set of iteration variables. Within one set, the behavior is exactly the same as for the normal iteration variables as shown above.</p>
<p>The following example shows two data sets with different SNR regions for two different block lengths: </p>
<div class="fragment"><pre class="fragment">...
    &lt;global&gt;
        &lt;iter&gt;
            &lt;data_set&gt;
                &lt;variable name=<span class="stringliteral">&quot;eb_n0&quot;</span>&gt;1.0:0.25:3.0&lt;/variable&gt;
                &lt;variable name=<span class="stringliteral">&quot;blocklength&quot;</span>&gt;100&lt;/variable&gt;
            &lt;/data_set&gt;
            &lt;data_set&gt;
                &lt;variable name=<span class="stringliteral">&quot;eb_n0&quot;</span>&gt;5:5:0.5:7.0&lt;/variable&gt;
                &lt;variable name=<span class="stringliteral">&quot;blocklength&quot;</span>500&lt;/variable&gt;
            &lt;/data_set&gt;

        &lt;/iter&gt;
    &lt;/global&gt;
...
</pre></div><p>You can define as many data sets as you want, <b> but all data sets must have exactly the same iteration variables! </b> It is not possible to create data sets with different iteration variables!</p>
<p>This concept allows for a high flexibility, e.g., one can define a single configuration file that includes all cases of a communication standard.</p>
<p>In addition, one has the possibility to deactivate a single data set by adding the "active" attribute with the value "false". </p>
<div class="fragment"><pre class="fragment">...
            &lt;data_set active=<span class="stringliteral">&quot;false&quot;</span>&gt;
                &lt;variable name=<span class="stringliteral">&quot;eb_n0&quot;</span>&gt;5:5:0.5:7.0&lt;/variable&gt;
                &lt;variable name=<span class="stringliteral">&quot;blocklength&quot;</span>500&lt;/variable&gt;
            &lt;/data_set&gt;
...
</pre></div><p>With this concept it is very easy to manage many different simulation cases with a small number of configuration files.</p>
<h2><a class="anchor" id="param_unit_tag"></a>
The &lt; param_unit &gt; tag</h2>
<p>Parameter units allow for the translation of parameters into other parameters, see <a class="el" href="chain_concept_page.html#param_unit_concept">Parameter Unit Concept</a>. An extra &lt;param_unit&gt; tag exists for configuration of parameter units. The unique_id attribute allows for an automatic instantiation of the parameter unit during runtime. For automatic instantiation of the parameter unit it is mandatory to register the unit in library/base/manage_dyn_instances.cpp, see also <a class="el" href="howto_write_param_unit_page.html">How to write a new parameter unit</a>.</p>
<div class="fragment"><pre class="fragment">    &lt;global&gt;
        &lt;variable name=<span class="stringliteral">&quot;info_bits&quot;</span>&gt;488&lt;/variable&gt;
        &lt;variable name=<span class="stringliteral">&quot;other_bits&quot;</span>&gt;488&lt;/variable&gt;
        &lt;variable name=<span class="stringliteral">&quot;mapping&quot;</span>&gt;MAP_QPSK&lt;/variable&gt;
        &lt;variable name=<span class="stringliteral">&quot;num_bits_per_symbol&quot;</span>&gt;2&lt;/variable&gt;
        &lt;variable name=<span class="stringliteral">&quot;noise_variance&quot;</span>&gt;&lt;param param_unit=<span class="stringliteral">&quot;SNR&quot;</span> name=<span class="stringliteral">&quot;noise_variance&quot;</span>/&gt;&lt;/variable&gt;
        &lt;iter&gt;
            &lt;variable name=<span class="stringliteral">&quot;es_n0&quot;</span>&gt;1.8:0.2:2.2&lt;/variable&gt;
        &lt;/iter&gt;
    &lt;/global&gt;

    &lt;param_unit unique_id=<span class="stringliteral">&quot;Param_Unit_SNR&quot;</span>&gt;
        &lt;instance_name&gt;SNR&lt;/instance_name&gt;
        &lt;input_snr&gt;&lt;global_variable name=<span class="stringliteral">&quot;es_n0&quot;</span>/&gt;&lt;/input_snr&gt;
        &lt;input_type&gt;ES_N0&lt;/input_type&gt;
        &lt;num_info_bits&gt;&lt;global_variable name=<span class="stringliteral">&quot;info_bits&quot;</span>/&gt;&lt;/num_info_bits&gt;
        &lt;num_other_bits&gt;&lt;global_variable name=<span class="stringliteral">&quot;other_bits&quot;</span>/&gt;&lt;/num_other_bits&gt;
        &lt;num_bits_per_symbol&gt;&lt;global_variable name=<span class="stringliteral">&quot;num_bits_per_symbol&quot;</span>/&gt;&lt;/bits_per_symbol&gt;
        
        &lt;param name = <span class="stringliteral">&quot;noise_variance&quot;</span>&gt;&lt;/param&gt;
        &lt;param name = <span class="stringliteral">&quot;eb_n0&quot;</span>&gt;&lt;/param&gt;
        &lt;param name = <span class="stringliteral">&quot;es_n0&quot;</span>&gt;&lt;/param&gt;
    &lt;/param_unit&gt;

    &lt;module&gt;
        &lt;instance_name&gt;Mapper&lt;/instance_name&gt;
        &lt;mapping&gt;&lt;global_variable name=<span class="stringliteral">&quot;mapping&quot;</span>/&gt;&lt;/mapping&gt;
    &lt;/module&gt;

    &lt;module&gt;
        &lt;instance_name&gt;Channel_AWGN&lt;/instance_name&gt;
        &lt;noise_variance&gt;&lt;global_variable name=<span class="stringliteral">&quot;noise_variance&quot;</span>/&gt;&lt;/noise_variance&gt;
    &lt;/module&gt;

    &lt;module&gt;
        &lt;instance_name&gt;Demapper&lt;/instance_name&gt;
        &lt;mapping&gt;&lt;global_variable name=<span class="stringliteral">&quot;mapping&quot;</span>/&gt;&lt;/mapping&gt;
        &lt;noise_variance&gt;&lt;global_variable name=<span class="stringliteral">&quot;noise_variance&quot;</span>/&gt;&lt;/noise_variance&gt;
    &lt;/module&gt;

...
</pre></div><p>It is possible to use multiple parameter units. Even the propagation of parameters from one unit to another unit is supported. However, the propagation is limited into one direction only, i.e., the topmost parameter unit in the XML file updates its parameters first, then the second parameter unit, then the third, and so on. Loops within the parameter propagation are prevented with this processing.</p>
<h2><a class="anchor" id="check_consis"></a>
Implemented XML consistency checks</h2>
<p>By using the Manage_Module_Configuration class a lot of consistency check are made. Each violation results either in a warning or an exception.</p>
<table class="doxtable">
<tr>
<th>Check</th><th>Behavior</th><th>Remarks  </th></tr>
<tr>
<td>XML file structure check</td><td>Exception</td><td>Prints the position at the file where the parsing error occurs.  </td></tr>
<tr>
<td>Number of &lt;global&gt; tags</td><td>Warning</td><td>The first section is taken.  </td></tr>
<tr>
<td>Number of &lt;iter&gt; subtags in global section</td><td>Warning</td><td>The first section is taken.  </td></tr>
<tr>
<td>Check iter subtree structure</td><td>Exception</td><td>Only data sets or direct child variables are allowed, no mixed syntax.  </td></tr>
<tr>
<td>Number of active data set has to be one at least</td><td>Exception</td><td>Active at least one data set or remove them all.  </td></tr>
<tr>
<td>Check variable consistency within the data sets</td><td>Exception</td><td>All data sets need to have the same variables (name)!  </td></tr>
<tr>
<td>Check double variables within the data sets and the global section</td><td>Exception</td><td>Each variable name must be unique in a data set!  </td></tr>
<tr>
<td>Check linked variables</td><td>Exception</td><td>Print the variable name where the error occurs.  </td></tr>
<tr>
<td>Unique ID of param modules</td><td>Exception</td><td>Each parameter module must have a unique ID of an existing module.  </td></tr>
<tr>
<td>Check param module output ports</td><td>Exception</td><td>Follow the given hints and instructions to correct the configuration file.  </td></tr>
<tr>
<td>Check for unknown/invalid parameters in the module XML subtree</td><td>Exception</td><td>Remove or correct the given unknown parameter.  </td></tr>
<tr>
<td>Check the conversion of the tag data into the given type</td><td>Exception: invalid_argument</td><td>Correct the value in the tag to be conform to the datatype expected.  </td></tr>
<tr>
<td>Check the string parameter for a module</td><td>Exception: invalid_argument</td><td>Correct the value in the tag to match a given item.  </td></tr>
</table>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
