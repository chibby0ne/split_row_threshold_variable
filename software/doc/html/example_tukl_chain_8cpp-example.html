<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Creonic Simulation Environment (CSE): example_tukl_chain.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>example_tukl_chain.cpp</h1>  </div>
</div>
<div class="contents">
<p>Example simulation chain</p>
<div class="fragment"><pre class="fragment"><span class="comment">//</span>
<span class="comment">//  Copyright (C) 2011 Creonic GmbH</span>
<span class="comment">//</span>
<span class="comment">//  This file is part of the Creonic simulation environment (CSE)</span>
<span class="comment">//  for communication systems.</span>
<span class="comment">//</span>
<span class="comment"></span><span class="comment">//</span>


<span class="preprocessor">#include &quot;cse_lib.h&quot;</span>

<span class="keyword">using namespace </span>cse_lib;

<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])
{

    <a name="_a0"></a><a class="code" href="classManage__Module__Config.html" title="Manage the automatic configuration of the modules via a XML file.">Manage_Module_Config</a> xml_config(<span class="stringliteral">&quot;config.xml&quot;</span>);
    <a name="_a1"></a><a class="code" href="classManage__Module__Result.html" title="Manage the XML result file.">Manage_Module_Result</a> xml_result(<span class="stringliteral">&quot;result.xml&quot;</span>,argv[0]);

    <span class="comment">// Instantiate modules</span>
    <a name="_a2"></a><a class="code" href="classcse__lib_1_1Source__Bits.html" title="Binary source class.">Source_Bits</a> source_bits;
    <a name="_a3"></a><a class="code" href="classcse__lib_1_1Encoder__LDPC__GMR.html" title="LDPC encoder for the GMR standard (N = 950 ... 11136, P = 16 ... 87, R = 0.5 ... 0.9).">Encoder_LDPC_GMR</a> enc_ldpc;
    <a name="_a4"></a><a class="code" href="classcse__lib_1_1Interleaving__GMR.html" title="GMR standard, (de-)interleaving functions.">Interleaving_GMR&lt;unsigned int&gt;</a> interleaver;
    interleaver.<a name="a5"></a><a class="code" href="classcse__lib_1_1Base__Parameter.html#a573f2075961c4863b0473e57b2a8a04b" title="Instance name parameter.">instance_name</a>(<span class="stringliteral">&quot;Interleaver_GMR&quot;</span>);
    <a name="_a6"></a><a class="code" href="classcse__lib_1_1Mapper.html" title="Flexible SISO Mapper, mapping bits to complex modulation symbols.">Mapper</a> mapper;
    <a name="_a7"></a><a class="code" href="classcse__lib_1_1Channel__AWGN.html" title="SISO AWGN Channel.">Channel_AWGN</a> channel_awgn;
    <a name="_a8"></a><a class="code" href="classcse__lib_1_1Demapper.html" title="SISO Signal Demapper class.">Demapper</a> demapper;
    <a name="_a9"></a><a class="code" href="classcse__lib_1_1Converter__Float__Fixpoint.html" title="Convert a Buffer of type float or complex&amp;lt;float&amp;gt; to fixpoint types with saturation.">Converter_Float_Fixpoint&lt;float, int&gt;</a> converter;
    <a class="code" href="classcse__lib_1_1Interleaving__GMR.html" title="GMR standard, (de-)interleaving functions.">Interleaving_GMR&lt;int&gt;</a> deinterleaver;
    deinterleaver.<a name="a10"></a><a class="code" href="classcse__lib_1_1Base__Parameter.html#a573f2075961c4863b0473e57b2a8a04b" title="Instance name parameter.">instance_name</a>(<span class="stringliteral">&quot;Deinterleaver_GMR&quot;</span>);
    <a name="_a11"></a><a class="code" href="classcse__lib_1_1Decoder__LDPC__GMR.html" title="LDPC decoder for the GMR standard (N = 950 ... 11136, P = 16 ... 87, R = 0.5 ... 0.9).">Decoder_LDPC_GMR</a> dec_ldpc;
    <a name="_a12"></a><a class="code" href="classcse__lib_1_1Statistics__Error__Rates.html" title="Error rates statistics class and simulation termination (sink).">Statistics_Error_Rates&lt;2&gt;</a> error_rates;



    <span class="comment">// Connect modules</span>
    enc_ldpc.<a name="a13"></a>input_bits(source_bits.<a name="a14"></a><a class="code" href="classcse__lib_1_1Source__Bits__Interface.html#a63030b1f815d6d81617799c87566c362" title="Output port which holds the generated bit sequence.">output_bits</a>());
    interleaver.<a name="a15"></a><a class="code" href="classcse__lib_1_1Interleaving__GMR__Interface.html#ae7f5d2867a9561832ec46eb9da1b5d4d" title="Input holding values to (de-)interleave.">input</a>(enc_ldpc.<a name="a16"></a>output_bits());
    mapper.<a name="a17"></a><a class="code" href="classcse__lib_1_1Mapper__Interface.html#affcbec3c1e77b86c7e541817f2d1e337" title="Input buffer are bits only.">input_bits</a>(interleaver.<a name="a18"></a><a class="code" href="classcse__lib_1_1Interleaving__GMR__Interface.html#acf7939956b1b58d1f79fdf20ae3f2b79" title="Output giving (de-)interleaved values.">output</a>());
    channel_awgn.<a name="a19"></a><a class="code" href="classcse__lib_1_1Channel__Interface.html#a18baa0414010eb29ffa885df8755327d" title="Complex input symbols.">input_symb</a>(mapper.<a name="a20"></a><a class="code" href="classcse__lib_1_1Mapper__Interface.html#a12d3e249a97d5db6d8c01601ea3bc0d5" title="Symbols are given as output.">output_symb</a>());
    demapper.<a name="a21"></a><a class="code" href="classcse__lib_1_1Demapper__Interface.html#a03aeec1f70d16f0b49a2eac7daece6dc" title="Input symbol port, for the received symbols.">input_symb</a>(channel_awgn.<a name="a22"></a><a class="code" href="classcse__lib_1_1Channel__Interface.html#a3eeb603532aff36c456691eb39e263bf" title="Complex output symbols with added noise.">output_symb</a>());
    converter.<a name="a23"></a><a class="code" href="classcse__lib_1_1Converter__Float__Fixpoint__Interface.html#ae8712b274056830bb178866ca69bb2ed" title="Input holding floating point values.">input</a>(demapper.<a name="a24"></a><a class="code" href="classcse__lib_1_1Demapper__Interface.html#a5f60cf08578970720040c77185fd714d" title="Output LLR port, LLR values of the demapped bits.">output_bits_llr</a>());
    deinterleaver.<a name="a25"></a><a class="code" href="classcse__lib_1_1Interleaving__GMR__Interface.html#ae7f5d2867a9561832ec46eb9da1b5d4d" title="Input holding values to (de-)interleave.">input</a>(converter.<a name="a26"></a><a class="code" href="classcse__lib_1_1Converter__Float__Fixpoint__Interface.html#add1f46fee0823bc8231d8783742162af" title="Output giving fix-point number representation.">output</a>());
    dec_ldpc.<a name="a27"></a><a class="code" href="classcse__lib_1_1Decoder__LDPC__GMR__Interface.html#ab66facff00924742cb54567ea42f20b8" title="Quantized channel values.">input_bits_llr</a>(deinterleaver.<a name="a28"></a><a class="code" href="classcse__lib_1_1Interleaving__GMR__Interface.html#acf7939956b1b58d1f79fdf20ae3f2b79" title="Output giving (de-)interleaved values.">output</a>());
    error_rates.<a name="a29"></a><a class="code" href="classcse__lib_1_1Statistics__Error__Rates__Interface.html#acdfa20b878bbb23463d58f2aee639d24" title="Input bits or symbols.">input_bits</a>(dec_ldpc.<a name="a30"></a><a class="code" href="classcse__lib_1_1Decoder__LDPC__GMR__Interface.html#af94b9459ac0bc2619d9bf60a6a07a302" title="Hard bits after decoding, without shortened and parity bits, i.e., only information bits...">output_bits</a>());
    error_rates.<a name="a31"></a><a class="code" href="classcse__lib_1_1Statistics__Error__Rates__Interface.html#afddff048bf53eed4121c7a3b0e74b572" title="Reference bits or symbols.">input_bits_ref</a>(source_bits.<a class="code" href="classcse__lib_1_1Source__Bits__Interface.html#a63030b1f815d6d81617799c87566c362" title="Output port which holds the generated bit sequence.">output_bits</a>());
 
    <span class="keywordtype">int</span> result;

    <span class="keywordflow">do</span>
    {
        <span class="comment">// Configure modules</span>
        xml_config.<a name="a32"></a><a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(source_bits);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(enc_ldpc);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(interleaver);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(mapper);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(channel_awgn);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(converter);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(demapper);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(deinterleaver);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(dec_ldpc);
        xml_config.<a class="code" href="classManage__Module__Config.html#a7e794c4d457881a988face79c6c21d99" title="Configure the given module with the data from the XML file.">Configure_Module</a>(error_rates);

        <span class="keywordflow">do</span>
        {
            source_bits.<a name="a33"></a><a class="code" href="classcse__lib_1_1Source__Bits.html#a063bfe688dce49004fae6d37831d6861" title="Calculates one block of bits and store them into the output buffer.">Run</a>();
            enc_ldpc.<a name="a34"></a>Run();
            interleaver.<a name="a35"></a>Run();
            mapper.<a name="a36"></a><a class="code" href="classcse__lib_1_1Mapper.html#ac809d8a7db56853c7913d69f5c930b59" title="Process one block.">Run</a>();

            channel_awgn.<a name="a37"></a><a class="code" href="classcse__lib_1_1Channel__AWGN.html#a23187a8532c02e85c534095e5b2cc487" title="Process one block.">Run</a>();

            demapper.<a name="a38"></a><a class="code" href="classcse__lib_1_1Demapper.html#aa15c32c7290c315eedcf5231b2076d4d" title="Demaps one block of data.">Run</a>();
            converter.<a name="a39"></a>Run();
            deinterleaver.<a name="a40"></a>Run();
            dec_ldpc.<a name="a41"></a>Run();

            result = error_rates.<a name="a42"></a><a class="code" href="classcse__lib_1_1Statistics__Error__Rates.html#a3249b54701038d76b95a1fb86714e326" title="Process one block.">Run</a>();
        }
        <span class="keywordflow">while</span>(result == 0);

        xml_result.<a name="a43"></a><a class="code" href="classManage__Module__Result.html#a6e0b7b25611adad4adfade55e48b41b8" title="Create a new iteration value XML tree to store the modules results.">Create_Iteration_Value_Result_Point</a>(xml_config);
        xml_result.<a name="a44"></a><a class="code" href="classManage__Module__Result.html#a8d11f78833c94e415bb23d35731bb21b" title="Insert the result from a module into the current working tree.">Insert_Results_From_Module</a>(demapper);
        xml_result.<a class="code" href="classManage__Module__Result.html#a8d11f78833c94e415bb23d35731bb21b" title="Insert the result from a module into the current working tree.">Insert_Results_From_Module</a>(error_rates);
        xml_result.<a name="a45"></a><a class="code" href="classManage__Module__Result.html#a34474ba5c3800f945e1074711c788d78" title="Write the current XML result tree into the file.">Write_Current_State</a>();
    }
    <span class="keywordflow">while</span>(xml_config.<a name="a46"></a><a class="code" href="classManage__Module__Config.html#a6242569704ca05a84a5c75ab0b28570e" title="Update configuration instance with the next iteration point.">Update_To_Next_Iter</a>() == 0);

    <span class="keywordflow">return</span> 0;
}
</pre></div> </div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
